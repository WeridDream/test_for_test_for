# SoT Index（唯一入口）
- Project：认证服务
- Owner：IU
- Last Updated：2026-02-25
- Status: FINAL
- Index Version: 1.0
- Revision: r20260223_13
- Supersedes: r20260223_12
---
## 1. Reading Order（证据链顺序）
> 说明：以下为阅读与推进顺序（不展开模块清单）。

1) 背景与范围  
- Logical: docs/01_business/00_background.md  
  
2) 端到端流程  
- Logical: docs/02_analysis/02_flows.md  
  
3) 总体方案与规划  
- Logical: docs/03_solution/00_target_architecture.md  
- Logical: docs/03_solution/01_design_plan.md  
  
4) 安全与身份  
- Logical: docs/04_security/00_threat_model.md  
- Logical: docs/04_security/01_identity_mtls_spire.md  
- Logical: docs/04_security/02_key_management.md  
  
5) 契约  
- Logical: docs/06_contracts/00_jwt_claims.md  
- Logical: docs/06_contracts/01_api/*  
  
6) 数据（DDL）  
- Logical: docs/05_data/00_ddl/000001_auth_center_init.md
  
7) 部署（配置）  
- Logical: docs/07_deploy/envoy/envoy.yaml.md 
- Logical: docs/07_deploy/spire/00_spire_install.md
  
8) 运维（SOP）  
- Logical: docs/08_runbooks/*  
  
9) 变更记录（CHG）  
- Logical: docs/09_records/decisions.md  

---

## 2. Documents Registry（文档登记表）
> 规则：所有上传的SoT均视为Final（覆盖更新）；修改必须在decisions.md里记录CHG
> 命名规则：Logical Path使用docs/...；Upload File使用docs_...（以 “/”→“_” 映射）。


| Doc ID        | Title                                             | Logical Path                                   | Uploaded File                                               | Last Updated | Depends on                                                   | Notes |
| ------------- | ------------------------------------------------- | ---------------------------------------------- | ----------------------------------------------------------- | ------------ | ------------------------------------------------------------ | ----- |
| BG-001        | 业务场景与背景                                           | docs/01_business/00_background.md              | docs_01_business_00_background_r20260223_06.md              | 2026-02-22   | docs/00_INDEX.md                                             |       |
| FL-001        | 端到端流程                                             | docs/02_analysis/02_flows.md                   | docs_02_analysis_02_flows_r20260223_03.md                   | 2026-02-25   | BG-001                                                       |       |
| ARCH-001      | 总体目标架构                                            | docs/03_solution/00_target_architecture.md     | docs_03_solution_00_target_architecture_r20260223_04.md     | 2026-02-23   | BG-001, FL-001                                               |       |
| PLAN-001      | 设计与实施规划                                           | docs/03_solution/01_design_plan.md             | docs_03_solution_01_design_plan_r20260223_01.md             | 2026-02-23   | BG-001, FL-001, ARCH-001                                     |       |
| SEC-001       | Threat Model                                      | docs/04_security/00_threat_model.md            | docs_04_security_00_threat_model_r20260223_01.md            | 2026-02-23   | BG-001, FL-001, ARCH-001, PLAN-001, JWT-001, API-001         |       |
| SEC-002       | Identity & mTLS with SPIRE                        | docs/04_security/01_identity_mtls_spire.md     | docs_04_security_01_identity_mtls_spire_r20260223_02.md     | 2026-02-25   | ARCH-001, PLAN-001, JWT-001, API-001, DDL-001                |       |
| SEC-003       | Key Management (SoftHSM2/PKCS#11 + JWKS Rotation) | docs/04_security/02_key_management.md          | docs_04_security_02_key_management_r20260223_02.md          | 2026-02-23   | ARCH-001, PLAN-001, SEC-002, JWT-001, API-001, DDL-001       |       |
| DDL-001       | auth_center Schema Definition                     | docs/05_data/00_ddl/000001_auth_center_init.md | docs_05_data_00_ddl_000001_auth_center_init_r20260223_02.md | 2026-02-23   | ARCH-001, FL-001, JWT-001, API-001                           |       |
| JWT-001       | Token Claims & Header Contract                    | docs/06_contracts/00_jwt_claims.md             | docs_06_contracts_00_jwt_claims_r20260223_03.md             | 2026-02-23   | FL-001, ARCH-001, PLAN-001                                   |       |
| API-001       | Issuer / Exchange / Gate / AuthZ Interfaces       | docs/06_contracts/01_api/00_api_001.md         | docs_06_contracts_01_api_00_api_001_r20260223_01.md         | 2026-02-23   | FL-001, JWT-001, ARCH-001                                    |       |
| DEP-ENV-001   | Envoy Gateway Config                              | docs/07_deploy/envoy/envoy.yaml.md             | docs_07_deploy_envoy_envoy_yaml_r20260223_02.md             | 2026-02-23   | FL-001, JWT-001, API-001, SEC-001, SEC-002, SEC-003, DDL-001 |       |
| DEP-SPIRE-001 | SPIRE (Server/Agent/Entries) Non-K8s Deploy       | docs/07_deploy/spire/00_spire_install.md       | docs_07_deploy_spire_00_spire_install_r20260223_02.md       | 2026-02-23   | SEC-002, DDL-001                                             |       |
| CHG-LOG       | 变更记录                                              | docs/09_records/decisions.md                   | docs_09__records_r20260225_01.md                            | 2026-02-25   | FL-001, DEP-ENV-001, SEC-002                                 |       |

---
## 3. Global Conventions（全局约定）
- 语言：中文为主；关键术语常量英文（GrantTicket/EntryCode/AccessToken/SessionToken、jwt_authn/ext_authz、spiffe_id/kid/jti等）
- 时间：全链路UTC；JWT的`iat/exp`为Unix秒；DB DATETIME存UTC。
- SoT优先级：DDL > Contracts > decisions.md > design/flows > deploy/runbooks。
- 文档状态：上传即FINAL；修改采用覆盖更新；任何修改必须在decisions.md记录CHG（Why/Impact/Diff/Rollback）
- 版本基线（项目统一口径）：
	- Go：1.26.x
	- Rust：1.93.1
	- Envoy：1.36.4
	- SPIRE：1.14.1
	- 前端方向：React+TypeScript+Vite+Tailwind
---
## 4. Open Questions（未决项清单）

| OQ-ID  | Question     | Owner | Target Doc | Status |
| ------ | ------------ | ----- | ---------- | ------ |
| OQ-002 | ctx约束问题      | IU    | JWT-001    | CLOSED |
| OQ-003 | **黑名单传播一致性** | IU    |            |        |

---
## 5. Change Log Pointer（变更日志入口）
- Logical: docs/09_records/decisions.md
- Upload: docs_09_records_decisions.md

